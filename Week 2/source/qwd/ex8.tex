Considering we get an exact sequence and wanting to select the $k$-th element, we want to calculate the exact number of comparisons. An obvirus notice is that the number of comparisons equals to the total number of comparisons of every node. Another notice is that every node is only compared by its \textbf{vaild} ancestor. 
	
\noindent Here $x$ is a \textbf{vaild} ancestor of $y$ iff:
\begin{itemize}
	\item $x$ is an ancestor of $y$;
	\item $x$ is visited in the procedure QUICKSELECT.
\end{itemize}
\noindent Hence, the number of comparisons of node $i$ is just the number of its \textbf{vaild} ancestors. And $j$ is a \textbf{vaild} ancestor of $i$ iff $j$ is the common ancestor of $i$ and $k$.
\noindent Hence, the comparsions of node $i$ is
\[\sum_{j = 1}^{n} B_{j, i, k}\]
\noindent And the total number of comparisons is that
\[\sum_{i = 1}^{n} \sum_{j = 1}^{n} B_{j, i, k}\]
\noindent However, in the implementation code in the problem, if $A$ has only one element, we don't have to make any comparsion. Hence, if $k$ is a leaf, we should fix our answer and actually if $k$ is a leaf, we should divide the comparisons by one. And thus the expected comparisons is that
\[\sum_{i = 1}^{n} \sum_{j = 1}^{n} B_{j, i, k} - \mathbb{E}[k\text{~is~a~leaf}]\]
